@startuml
participant 클라이언트
participant "입금 주소" as DepositAddress
participant "플랫폼 감시 시스템" as MonitorSystem
participant "데이터베이스" as Database
participant "클라이언트 콜백 URL" as ClientCallback
participant "수수료 지갑" as FeeWallet

== 입금 과정 ==
클라이언트 -> DepositAddress : ERC-20 토큰 입금
activate DepositAddress

DepositAddress -> MonitorSystem : 입금 감지
activate MonitorSystem

MonitorSystem -> Database : 입금 정보 저장
activate Database
Database --> MonitorSystem : 저장 완료
deactivate Database

MonitorSystem -> ClientCallback : 트랜잭션 정보 전송
activate ClientCallback
ClientCallback --> MonitorSystem : 확인 응답
deactivate ClientCallback
deactivate MonitorSystem

== 수수료 처리 ==
클라이언트 -> FeeWallet : 수수료 조회/추가
activate FeeWallet
FeeWallet --> 클라이언트 : 수수료 잔액 응답
deactivate FeeWallet

MonitorSystem -> FeeWallet : 수수료 차감 요청
activate FeeWallet
FeeWallet --> MonitorSystem : 수수료 차감 완료
deactivate FeeWallet
deactivate DepositAddress
@enduml
